<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FastUIDraw: Example Custom Stroking Shader</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FastUIDraw
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Example Custom Stroking Shader </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Example of using the shader-chaining interface to create a custom strok shader that applies an animated wave effect entirely within the shader.</p>
<p>Using the symbols documented in <a class="el" href="../../d2/dab/group___g_l_s_l_built_in_shaders.html">GLSL Built in Shaders</a>, the implementation of the custom shader and data is given by </p><div class="fragment"><div class="line"></div><div class="line"><span class="comment">/* The data for the custom shader is a set of numbers followed</span></div><div class="line"><span class="comment"> * by a fastuidraw::PainterStrokeParams object.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">class </span>ExampleItemData:<span class="keyword">public</span> <a class="code" href="../../dc/d84/classfastuidraw_1_1_painter_item_shader_data.html">fastuidraw::PainterItemShaderData</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="comment">/* This function is what FastUIDraw calls to pack data for</span></div><div class="line"><span class="comment">   * the shader to read. In this example we pack first the data</span></div><div class="line"><span class="comment">   * to implement the wavy effect followed by the the data of</span></div><div class="line"><span class="comment">   * a fastuidraw::PainterStrokeParams object.</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="keyword">virtual</span></div><div class="line">  <span class="keywordtype">void</span></div><div class="line">  <a class="code" href="../../d2/d6f/classfastuidraw_1_1_painter_shader_data.html#a923fb776e1fb146117dc6481493391aa">pack_data</a>(<a class="code" href="../../de/df7/classfastuidraw_1_1c__array.html">fastuidraw::c_array&lt;fastuidraw::uvec4&gt;</a> dst)<span class="keyword"> const override</span></div><div class="line"><span class="keyword">  </span>{</div><div class="line">    <span class="keywordtype">float</span> sum(0.0f);</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i)</div><div class="line">      {</div><div class="line">        sum += <a class="code" href="../../da/d46/group___utility.html#ga861f84b80fe0d2e36fa8aecd381a592e">fastuidraw::t_abs</a>(m_cos_coeffs[i]);</div><div class="line">        sum += <a class="code" href="../../da/d46/group___utility.html#ga861f84b80fe0d2e36fa8aecd381a592e">fastuidraw::t_abs</a>(m_sin_coeffs[i]);</div><div class="line">      }</div><div class="line"></div><div class="line">    dst[0] = <a class="code" href="../../da/d46/group___utility.html#gad64c2cdcdbd7d40191e7ca64d82416fe">fastuidraw::pack_vec4</a>(m_cos_coeffs);</div><div class="line">    dst[1] = <a class="code" href="../../da/d46/group___utility.html#gad64c2cdcdbd7d40191e7ca64d82416fe">fastuidraw::pack_vec4</a>(m_sin_coeffs);</div><div class="line">    dst[2].x() = <a class="code" href="../../d4/d4c/namespacefastuidraw.html#a492a283147a94e8c41b9a306d9c81a12">fastuidraw::pack_float</a>(m_domain_coeff);</div><div class="line">    dst[2].y() = <a class="code" href="../../d4/d4c/namespacefastuidraw.html#a492a283147a94e8c41b9a306d9c81a12">fastuidraw::pack_float</a>(1.0f / sum);</div><div class="line">    dst[2].z() = <a class="code" href="../../d4/d4c/namespacefastuidraw.html#a492a283147a94e8c41b9a306d9c81a12">fastuidraw::pack_float</a>(m_phase);</div><div class="line">    dst[2].w() = <a class="code" href="../../d4/d4c/namespacefastuidraw.html#a492a283147a94e8c41b9a306d9c81a12">fastuidraw::pack_float</a>(m_stroke_params.width());</div><div class="line">    m_stroke_params.pack_data(dst.<a class="code" href="../../de/df7/classfastuidraw_1_1c__array.html#aa73202f716ded74f65c63a0e7b2b88fa">sub_array</a>(3));</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">/* This function is what FastUIDraw calls to know what is the</span></div><div class="line"><span class="comment">   * size of the data to pack.</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="keyword">virtual</span></div><div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div><div class="line">  <a class="code" href="../../d2/d6f/classfastuidraw_1_1_painter_shader_data.html#a70e8368d554fd1d48ea96c94c16c1068">data_size</a>(<span class="keywordtype">void</span>)<span class="keyword"> const override</span></div><div class="line"><span class="keyword">  </span>{</div><div class="line">    <span class="keywordflow">return</span> 3 + m_stroke_params.data_size();</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">/* The numbers to control the wavy effect */</span></div><div class="line">  <span class="keywordtype">float</span> m_domain_coeff, m_phase;</div><div class="line">  <a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vecN&lt;float, 4&gt;</a> m_cos_coeffs;</div><div class="line">  <a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vecN&lt;float, 4&gt;</a> m_sin_coeffs;</div><div class="line"></div><div class="line">  <span class="comment">/* the values specifying to the base-shader how to stroke */</span></div><div class="line">  <a class="code" href="../../df/df5/classfastuidraw_1_1_painter_stroke_params.html">fastuidraw::PainterStrokeParams</a> m_stroke_params;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* We want to create a PainterItemShaderGLSL that has a dependee</span></div><div class="line"><span class="comment"> * a PainterItemShaderGLSL that does the actual stroking. However,</span></div><div class="line"><span class="comment"> * an item-shader can (but does not need to) have a coverage shader</span></div><div class="line"><span class="comment"> * that is called first to draw to an auxiliary coverage buffer that</span></div><div class="line"><span class="comment"> * the actual item shaders uses for a coverage value for shader-based</span></div><div class="line"><span class="comment"> * anti-aliasing.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * Rather than duplicating the code, we will use template function to</span></div><div class="line"><span class="comment"> * do the shader generation. However, the ctor of PainterItemShaderGLSL</span></div><div class="line"><span class="comment"> * and PainterItemCoverageShaderGLSL are different in their argument</span></div><div class="line"><span class="comment"> * lists, so we rely on C++ function overloading to call the ctor via</span></div><div class="line"><span class="comment"> * a function between, call_ctor.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::glsl::PainterItemShaderGLSL&gt;</a></div><div class="line">call_ctor(<span class="keywordtype">bool</span> uses_discard,</div><div class="line">          <span class="keyword">const</span> <a class="code" href="../../d5/db9/classfastuidraw_1_1glsl_1_1_shader_source.html">fastuidraw::glsl::ShaderSource</a> &amp;vert_src,</div><div class="line">          <span class="keyword">const</span> <a class="code" href="../../d5/db9/classfastuidraw_1_1glsl_1_1_shader_source.html">fastuidraw::glsl::ShaderSource</a> &amp;frag_src,</div><div class="line">          <span class="keyword">const</span> <a class="code" href="../../d4/dd0/classfastuidraw_1_1glsl_1_1_painter_item_shader_g_l_s_l_1_1_dependency_list.html">fastuidraw::glsl::PainterItemShaderGLSL::DependencyList</a> deps,</div><div class="line">          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> num_subshaders)</div><div class="line">{</div><div class="line">  <span class="comment">/* The first argument to PainterItemShaderGLSL is if the the item shader</span></div><div class="line"><span class="comment">   * uses dicard. The GL/GLES backends of FastUIDraw seperate the item</span></div><div class="line"><span class="comment">   * shaders that use and don&#39;t use discard from each other into seperate</span></div><div class="line"><span class="comment">   * GL programs. This is done because shaders that have discard stop a</span></div><div class="line"><span class="comment">   * GPU from performing a variety of optimiations (the biggest ones being</span></div><div class="line"><span class="comment">   * early-depth-test and hierarchical occlusion.</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="keywordflow">return</span> <a class="code" href="../../da/d46/group___utility.html#ga524a8b6674554f360cf8b04a3a6a37b0">FASTUIDRAWnew</a> <a class="code" href="../../d0/d65/classfastuidraw_1_1glsl_1_1_painter_item_shader_g_l_s_l.html">fastuidraw::glsl::PainterItemShaderGLSL</a>(uses_discard,</div><div class="line">                                                               vert_src,</div><div class="line">                                                               frag_src,</div><div class="line">                                                               <a class="code" href="../../d5/da3/classfastuidraw_1_1glsl_1_1varying__list.html">fastuidraw::glsl::varying_list</a>(),</div><div class="line">                                                               deps,</div><div class="line">                                                               num_subshaders);</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::glsl::PainterItemCoverageShaderGLSL&gt;</a></div><div class="line">call_ctor(<span class="keywordtype">bool</span>,</div><div class="line">          <span class="keyword">const</span> <a class="code" href="../../d5/db9/classfastuidraw_1_1glsl_1_1_shader_source.html">fastuidraw::glsl::ShaderSource</a> &amp;vert_src,</div><div class="line">          <span class="keyword">const</span> <a class="code" href="../../d5/db9/classfastuidraw_1_1glsl_1_1_shader_source.html">fastuidraw::glsl::ShaderSource</a> &amp;frag_src,</div><div class="line">          <span class="keyword">const</span> <a class="code" href="../../d1/db7/classfastuidraw_1_1glsl_1_1_painter_item_coverage_shader_g_l_s_l_1_1_dependency_list.html">fastuidraw::glsl::PainterItemCoverageShaderGLSL::DependencyList</a> deps,</div><div class="line">          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> num_subshaders)</div><div class="line">{</div><div class="line">  <span class="keywordflow">return</span> <a class="code" href="../../da/d46/group___utility.html#ga524a8b6674554f360cf8b04a3a6a37b0">FASTUIDRAWnew</a> <a class="code" href="../../d5/dd9/classfastuidraw_1_1glsl_1_1_painter_item_coverage_shader_g_l_s_l.html">fastuidraw::glsl::PainterItemCoverageShaderGLSL</a>(vert_src,</div><div class="line">                                                                       frag_src,</div><div class="line">                                                                       <a class="code" href="../../d5/da3/classfastuidraw_1_1glsl_1_1varying__list.html">fastuidraw::glsl::varying_list</a>(),</div><div class="line">                                                                       deps,</div><div class="line">                                                                       num_subshaders);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">bool</span></div><div class="line">uses_discard(<span class="keyword">const</span> <a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::glsl::PainterItemShaderGLSL&gt;</a> &amp;sh,</div><div class="line">             <span class="keywordtype">bool</span> apply_wavy_effect)</div><div class="line">{</div><div class="line">  <span class="keywordflow">return</span> apply_wavy_effect || sh-&gt;<a class="code" href="../../d0/d65/classfastuidraw_1_1glsl_1_1_painter_item_shader_g_l_s_l.html#a8c9c234c947c724c03db0b84a59bc0d5">uses_discard</a>();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">bool</span></div><div class="line">uses_discard(<span class="keyword">const</span> <a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::glsl::PainterItemCoverageShaderGLSL&gt;</a>&amp;,</div><div class="line">             <span class="keywordtype">bool</span>)</div><div class="line">{</div><div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This beast of a function is used to generate the custom item and coverage shaders</span></div><div class="line"><span class="comment"> * that apply a wavy effect to stroking. The stroking shaders of FastUIDraw&#39;s GL/GLES</span></div><div class="line"><span class="comment"> * backends operate as follows:</span></div><div class="line"><span class="comment"> *   - the non-anti-aliased shader does not have a PainterItemCoverageShader. Thus</span></div><div class="line"><span class="comment"> *     the fragment shader of the non-anti-aliased shader is the one that performs</span></div><div class="line"><span class="comment"> *     any possible stroking computation.</span></div><div class="line"><span class="comment"> *   - the anti-aliased shader has a coverage shader. The coverage shader is the</span></div><div class="line"><span class="comment"> *     shader that performs the diffucult computation (in the case of arc-stroking</span></div><div class="line"><span class="comment"> *     or dashed stroking) of if a fragment is covered and if so, what it the coverage.</span></div><div class="line"><span class="comment"> *     The item shader simply reads from the coverage buffer and emits the value.</span></div><div class="line"><span class="comment"> *     Hence, in the anti-aliased case, the item shader does NOT apply the wavy effect,</span></div><div class="line"><span class="comment"> *     but the coverage shader does. However, both read from the shader data and we</span></div><div class="line"><span class="comment"> *     placed teh wavy effect values before the stroking parameters, thus we still</span></div><div class="line"><span class="comment"> *     need a custom shader to place the shader data read location at the correct</span></div><div class="line"><span class="comment"> *     location for the base shader to read.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;T&gt;</a></div><div class="line">create_custom_shader(<span class="keyword">const</span> <a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;T&gt;</a> &amp;stroking_shader,</div><div class="line">                     <span class="keywordtype">bool</span> add_wavy_effect)</div><div class="line">{</div><div class="line">  <span class="keyword">using namespace </span><a class="code" href="../../d4/d4c/namespacefastuidraw.html">fastuidraw</a>;</div><div class="line">  <span class="keyword">using namespace </span><a class="code" href="../../df/d7b/namespacefastuidraw_1_1glsl.html">fastuidraw::glsl</a>;</div><div class="line"></div><div class="line">  <span class="comment">/* Add the dependency of the base stroking shader and refer to as</span></div><div class="line"><span class="comment">   * stroke_shader in the custom item shader.</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="keyword">typename</span> T::DependencyList deps;</div><div class="line">  deps.<a class="code" href="../../d1/db7/classfastuidraw_1_1glsl_1_1_painter_item_coverage_shader_g_l_s_l_1_1_dependency_list.html#a2598a60a1748e08499b566897aabd5f2">add_shader</a>(<span class="stringliteral">&quot;stroke_shader&quot;</span>, stroking_shader);</div><div class="line"></div><div class="line">  <span class="comment">/* The custom vertex shader is essentially just a pass through to</span></div><div class="line"><span class="comment">   * the vertex shader of the stroking shader, except that is needs</span></div><div class="line"><span class="comment">   * to adjust the shader_data_block to where the stroking parameters</span></div><div class="line"><span class="comment">   * start.</span></div><div class="line"><span class="comment">   *</span></div><div class="line"><span class="comment">   * The signature for the vertex-shaders for PainterItemShaderGLSL and</span></div><div class="line"><span class="comment">   * PainterItemCoverageShaderGLSL is different in the argument list.</span></div><div class="line"><span class="comment">   * FastUIDraw will define the symbol FASTUIDRAW_RENDER_TO_COLOR_BUFFER</span></div><div class="line"><span class="comment">   * for non-coverage shaders. This way, an application can share more</span></div><div class="line"><span class="comment">   * shader code internally more easily and we take advantage of that</span></div><div class="line"><span class="comment">   * here.</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *custom_vert_shader =</div><div class="line">    <span class="stringliteral">&quot;void\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;fastuidraw_gl_vert_main(in uint sub_shader,\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                        in uvec4 in_attrib0,\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                        in uvec4 in_attrib1,\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                        in uvec4 in_attrib2,\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                        inout uint shader_data_block,\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                        #ifdef FASTUIDRAW_RENDER_TO_COLOR_BUFFER\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                        out int z_add,\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                        out vec2 out_brush_p,\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                        #endif\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                        out vec3 out_clip_p)\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;{\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;    shader_data_block += 3u;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;    stroke_shader(sub_shader, in_attrib0, in_attrib1, in_attrib2,\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                  shader_data_block,\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                  #ifdef FASTUIDRAW_RENDER_TO_COLOR_BUFFER\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                  z_add, out_brush_p,\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                  #endif\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                  out_clip_p);\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;}\n&quot;</span>;</div><div class="line"></div><div class="line">  <span class="comment">/* This is the fragment shader that applies to wave-effect to the stroking.</span></div><div class="line"><span class="comment">   * Similair to the vertex shader, the signatures for the fragment shader</span></div><div class="line"><span class="comment">   * for PainterItemShaderGLSL and PainterItemCoverageShaderGLSL are different</span></div><div class="line"><span class="comment">   * (the former returning a vec4 color value and the latter just a scalar float</span></div><div class="line"><span class="comment">   * coverage value). Again, we test for the symbol FASTUIDRAW_RENDER_TO_COLOR_BUFFER</span></div><div class="line"><span class="comment">   * to know if we are doing a PainterItemShaderGLSL or PainterItemCoverageShaderGLSL.</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *custom_wavy_frag_shader =</div><div class="line">    <span class="stringliteral">&quot;#ifdef FASTUIDRAW_RENDER_TO_COLOR_BUFFER\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;#define return_type vec4\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;#else\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;#define return_type float\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;#endif\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;return_type\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;fastuidraw_gl_frag_main(in uint sub_shader,\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                        inout uint shader_data_block)\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;{\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   vec4 cos_coeffs, sin_coeffs;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   uvec4 tmp;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   float coeff, inverse_sum, phase, width;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   return_type return_value;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   cos_coeffs = uintBitsToFloat(fastuidraw_fetch_data(shader_data_block));\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   sin_coeffs = uintBitsToFloat(fastuidraw_fetch_data(shader_data_block + 1u));\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   tmp = fastuidraw_fetch_data(shader_data_block + 2u);\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   coeff = uintBitsToFloat(tmp.x);\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   inverse_sum = uintBitsToFloat(tmp.y);\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   phase = uintBitsToFloat(tmp.z);\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   width = uintBitsToFloat(tmp.w);\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   shader_data_block += 3u;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   return_value = stroke_shader(sub_shader, shader_data_block);\n&quot;</span></div><div class="line">    <span class="comment">// use the symbols fastuidraw_stroking_relative_distance_from_center</span></div><div class="line">    <span class="comment">// and fastuidraw_stroking_distance to know where and how far the fragment</span></div><div class="line">    <span class="comment">// is from the path and how far along it is on the path</span></div><div class="line">    <span class="stringliteral">&quot;   float a, r;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   vec4 cos_tuple, sin_tuple;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   r = coeff * stroke_shader::fastuidraw_stroking_distance + phase;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   cos_tuple = vec4(cos(r), cos(2.0 * r), cos(3.0 * r), cos(4.0 * r));\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   sin_tuple = vec4(sin(r), sin(2.0 * r), sin(3.0 * r), sin(4.0 * r));\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   a = inverse_sum * (dot(cos_coeffs, cos_tuple) + dot(sin_coeffs, sin_tuple));\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   a = abs(a);\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;#ifdef FASTUIDRAW_RENDER_TO_COLOR_BUFFER\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   if (a &lt; stroke_shader::fastuidraw_stroking_relative_distance_from_center)\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;     FASTUIDRAW_DISCARD;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;#else\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   float q, dd;\n&quot;</span></div><div class="line">    <span class="comment">// we want a coverage value so that if a &lt; stroke_shader::fastuidraw_stroking_relative_distance_from_center</span></div><div class="line">    <span class="comment">// then we get zero, but we want to apply some anti-aliasing as well.</span></div><div class="line">    <span class="stringliteral">&quot;   q = max(a - stroke_shader::fastuidraw_stroking_relative_distance_from_center, 0.0);\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   dd = max(q, stroke_shader::fastuidraw_stroking_relative_distance_from_center_fwidth);\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   return_value *= q / dd;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;#endif\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   return return_value;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;}\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;#undef return_type\n&quot;</span>;</div><div class="line"></div><div class="line">  <span class="comment">/* This shader string is used if the fragment shader does not apply the wavy effect</span></div><div class="line"><span class="comment">   * and just needs to pass down to the stroking shader&#39;s fragment shader. As for the</span></div><div class="line"><span class="comment">   * vertex shader case, its main purpose then is to just update the location of</span></div><div class="line"><span class="comment">   * the shader data to where the stroking parameters start.</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *custom_pass_through_frag_shader =</div><div class="line">    <span class="stringliteral">&quot;#ifdef FASTUIDRAW_RENDER_TO_COLOR_BUFFER\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;vec4\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;#else\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;float\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;#endif\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;fastuidraw_gl_frag_main(in uint sub_shader,\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;                        inout uint shader_data_block)\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;{\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   shader_data_block += 3u;&quot;</span></div><div class="line">    <span class="stringliteral">&quot;   return stroke_shader(sub_shader, shader_data_block);\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;}\n&quot;</span>;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *custom_frag_shader;</div><div class="line"></div><div class="line">  custom_frag_shader = (add_wavy_effect) ?</div><div class="line">    custom_wavy_frag_shader:</div><div class="line">    custom_pass_through_frag_shader;</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> call_ctor(uses_discard(stroking_shader, add_wavy_effect),</div><div class="line">                   <a class="code" href="../../d5/db9/classfastuidraw_1_1glsl_1_1_shader_source.html">ShaderSource</a>().add_source(custom_vert_shader, ShaderSource::from_string),</div><div class="line">                   <a class="code" href="../../d5/db9/classfastuidraw_1_1glsl_1_1_shader_source.html">ShaderSource</a>().add_source(custom_frag_shader, ShaderSource::from_string),</div><div class="line">                   deps,</div><div class="line">                   stroking_shader-&gt;number_sub_shaders());</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* The next block of code is essentially ugly boilerplate code to handle</span></div><div class="line"><span class="comment"> * the that item shaders of a fastuidraw::PainterStrokeShader are realized</span></div><div class="line"><span class="comment"> * as sub-shaders of a parent shader and we wish to follow the that</span></div><div class="line"><span class="comment"> * structure.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><span class="keyword">class </span>CustomShaderGenerator:<a class="code" href="../../da/d81/classfastuidraw_1_1noncopyable.html">fastuidraw::noncopyable</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keyword">typedef</span> <a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;T&gt;</a> shader_ref;</div><div class="line">  <span class="keyword">typedef</span> std::map&lt;shader_ref, shader_ref&gt; shader_map;</div><div class="line"></div><div class="line">  shader_ref</div><div class="line">  fetch_generate_custom_shader(<span class="keyword">const</span> shader_ref &amp;src, <span class="keywordtype">bool</span> add_wavy_effect)</div><div class="line">  {</div><div class="line">    <span class="keyword">typename</span> shader_map::iterator iter;</div><div class="line">    shader_ref return_value;</div><div class="line"></div><div class="line">    iter = m_shaders.find(src);</div><div class="line">    <span class="keywordflow">if</span> (iter != m_shaders.end())</div><div class="line">      {</div><div class="line">        return_value = iter-&gt;second;</div><div class="line">      }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">      {</div><div class="line">        return_value = create_custom_shader&lt;T&gt;(src, add_wavy_effect);</div><div class="line">        m_shaders[src] = return_value;</div><div class="line">      }</div><div class="line">    <span class="keywordflow">return</span> return_value;</div><div class="line">  }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">  shader_map m_shaders;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* Finally, the code that generates the item shader from a base shader.</span></div><div class="line"><span class="comment"> * The arguments item_shaders and cvg_shaders are for re-using parent</span></div><div class="line"><span class="comment"> * shaders if the passed source shader, src, is a sub-shader.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::PainterItemShader&gt;</a></div><div class="line">generate_item_shader(CustomShaderGenerator&lt;fastuidraw::glsl::PainterItemShaderGLSL&gt; &amp;item_shaders,</div><div class="line">                     CustomShaderGenerator&lt;fastuidraw::glsl::PainterItemCoverageShaderGLSL&gt; &amp;cvg_shaders,</div><div class="line">                     <a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::PainterItemShader&gt;</a> src)</div><div class="line">{</div><div class="line">  <span class="keyword">using namespace </span><a class="code" href="../../d4/d4c/namespacefastuidraw.html">fastuidraw</a>;</div><div class="line">  <span class="keyword">using namespace </span>glsl;</div><div class="line"></div><div class="line">  <a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">reference_counted_ptr&lt;PainterItemCoverageShader&gt;</a> src_cvg, use_cvg;</div><div class="line">  <a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">reference_counted_ptr&lt;PainterItemShaderGLSL&gt;</a> src_glsl, use;</div><div class="line"></div><div class="line">  <span class="comment">/* Get the actual item shader that implements the code. If a shader</span></div><div class="line"><span class="comment">   * is realized as a sub-shader, then parent() will be a non-null</span></div><div class="line"><span class="comment">   * reference to the shader that implements the code (which then for</span></div><div class="line"><span class="comment">   * the GL and GLES backends is then a PainterItemShaderGLSL).</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="keywordflow">if</span> (src-&gt;<a class="code" href="../../de/d74/classfastuidraw_1_1_painter_shader.html#a890ab00948591ac7e55d760c8f67a841">parent</a>())</div><div class="line">    {</div><div class="line">      src_glsl = src-&gt;<a class="code" href="../../de/d74/classfastuidraw_1_1_painter_shader.html#a890ab00948591ac7e55d760c8f67a841">parent</a>().dynamic_cast_ptr&lt;<a class="code" href="../../d0/d65/classfastuidraw_1_1glsl_1_1_painter_item_shader_g_l_s_l.html">PainterItemShaderGLSL</a>&gt;();</div><div class="line">    }</div><div class="line">  <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">      src_glsl = src.<a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html#aee1741d0372cf53fd3717e18dc04bd5d">dynamic_cast_ptr</a>&lt;<a class="code" href="../../d0/d65/classfastuidraw_1_1glsl_1_1_painter_item_shader_g_l_s_l.html">PainterItemShaderGLSL</a>&gt;();</div><div class="line">    }</div><div class="line">  <a class="code" href="../../da/d46/group___utility.html#gaa9f925896ddde7e73402366ebf94b70e">FASTUIDRAWassert</a>(src_glsl);</div><div class="line"></div><div class="line">  <span class="comment">/* Check if the item-shader uses a coverage shader, if it does, then</span></div><div class="line"><span class="comment">   * it is the coverage shader that implements the wavy-effect.</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  src_cvg = src-&gt;<a class="code" href="../../db/d83/classfastuidraw_1_1_painter_item_shader.html#a2a718fc86162342f487a0a19661fe3e6">coverage_shader</a>();</div><div class="line">  <span class="keywordflow">if</span> (src_cvg)</div><div class="line">    {</div><div class="line">      <a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;PainterItemCoverageShaderGLSL&gt;</a> src_cvg_glsl;</div><div class="line"></div><div class="line">      <span class="keywordflow">if</span> (src_cvg-&gt;<a class="code" href="../../de/d74/classfastuidraw_1_1_painter_shader.html#a890ab00948591ac7e55d760c8f67a841">parent</a>())</div><div class="line">        {</div><div class="line">          src_cvg_glsl = src_cvg-&gt;<a class="code" href="../../de/d74/classfastuidraw_1_1_painter_shader.html#a890ab00948591ac7e55d760c8f67a841">parent</a>().dynamic_cast_ptr&lt;<a class="code" href="../../d5/dd9/classfastuidraw_1_1glsl_1_1_painter_item_coverage_shader_g_l_s_l.html">PainterItemCoverageShaderGLSL</a>&gt;();</div><div class="line">        }</div><div class="line">      <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">          src_cvg_glsl = src_cvg.<a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html#aee1741d0372cf53fd3717e18dc04bd5d">dynamic_cast_ptr</a>&lt;<a class="code" href="../../d5/dd9/classfastuidraw_1_1glsl_1_1_painter_item_coverage_shader_g_l_s_l.html">PainterItemCoverageShaderGLSL</a>&gt;();</div><div class="line">        }</div><div class="line">      <a class="code" href="../../da/d46/group___utility.html#gaa9f925896ddde7e73402366ebf94b70e">FASTUIDRAWassert</a>(src_cvg_glsl);</div><div class="line"></div><div class="line">      <span class="comment">/* the coverage shader does the pixel coverage */</span></div><div class="line">      use_cvg = cvg_shaders.fetch_generate_custom_shader(src_cvg_glsl, <span class="keyword">true</span>);</div><div class="line">      use = item_shaders.fetch_generate_custom_shader(src_glsl, <span class="keyword">false</span>);</div><div class="line"></div><div class="line">      <span class="comment">/* use correct sub-shader from use_cvg */</span></div><div class="line">      use_cvg = <a class="code" href="../../da/d46/group___utility.html#ga524a8b6674554f360cf8b04a3a6a37b0">FASTUIDRAWnew</a> <a class="code" href="../../d5/dac/classfastuidraw_1_1_painter_item_coverage_shader.html">PainterItemCoverageShader</a>(use_cvg, src_cvg-&gt;<a class="code" href="../../de/d74/classfastuidraw_1_1_painter_shader.html#ab1b779232d4f40180c834dc2076b918d">sub_shader</a>());</div><div class="line">    }</div><div class="line">  <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">      <span class="comment">/* Fragment&#39;s item shader does the pixel computation */</span></div><div class="line">      use = item_shaders.fetch_generate_custom_shader(src_glsl, <span class="keyword">true</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> <a class="code" href="../../da/d46/group___utility.html#ga524a8b6674554f360cf8b04a3a6a37b0">FASTUIDRAWnew</a> <a class="code" href="../../db/d83/classfastuidraw_1_1_painter_item_shader.html">PainterItemShader</a>(use, src-&gt;<a class="code" href="../../de/d74/classfastuidraw_1_1_painter_shader.html#ab1b779232d4f40180c834dc2076b918d">sub_shader</a>(), use_cvg);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* A PainterStrokeShader consists of 4 items shaders. There is a stroking</span></div><div class="line"><span class="comment"> * methods of how to stroke (see Painter::stroking_method_t) and if shader</span></div><div class="line"><span class="comment"> * based anti-aliasing is appled (see PainterStrokeShader::shader_type_t).</span></div><div class="line"><span class="comment"> * This function is just a conveniance function to make typing less awful.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keywordtype">void</span></div><div class="line">set_shader(<a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html">fastuidraw::PainterStrokeShader</a> &amp;dst,</div><div class="line">           CustomShaderGenerator&lt;fastuidraw::glsl::PainterItemShaderGLSL&gt; &amp;item_shaders,</div><div class="line">           CustomShaderGenerator&lt;fastuidraw::glsl::PainterItemCoverageShaderGLSL&gt; &amp;cvg_shaders,</div><div class="line">           <span class="keyword">const</span> <a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html">fastuidraw::PainterStrokeShader</a> &amp;src,</div><div class="line">           <span class="keyword">enum</span> <a class="code" href="../../d6/db7/classfastuidraw_1_1_painter_enums.html#a8216bd07f35fadd5a9848bee30241d5d">fastuidraw::Painter::stroking_method_t</a> tp,</div><div class="line">           <span class="keyword">enum</span> <a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html#a1365ed3bc26b9cc326661a566e88883d">fastuidraw::PainterStrokeShader::shader_type_t</a> sh)</div><div class="line">{</div><div class="line">  <a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::PainterItemShader&gt;</a> new_shader, src_shader;</div><div class="line"></div><div class="line">  src_shader = src.<a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html#a35ecbe59f2accb53df2a02bad988e64f">shader</a>(tp, sh);</div><div class="line">  new_shader = generate_item_shader(item_shaders, cvg_shaders, src_shader);</div><div class="line">  <a class="code" href="../../da/d46/group___utility.html#gaa9f925896ddde7e73402366ebf94b70e">FASTUIDRAWassert</a>(new_shader);</div><div class="line"></div><div class="line">  dst.<a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html#a35ecbe59f2accb53df2a02bad988e64f">shader</a>(tp, sh, new_shader);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* Attached to a PainterStrokeShader is also a StrokingDataSelectorBase</span></div><div class="line"><span class="comment"> * that FastUIDraw uses to realize how much the path geometry is inflated</span></div><div class="line"><span class="comment"> * on stroking. These objects use the -packed- data of the PainterItemShaderData</span></div><div class="line"><span class="comment"> * to compute this. Since the stroking data starts after the wavy-effect data,</span></div><div class="line"><span class="comment"> * we need to have a StrokingDataSelectorBase that takes this into account</span></div><div class="line"><span class="comment"> * before passing the data to the &quot;real&quot; StrokingDataSelectorBase object.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">class </span>CustomStrokingDataSelector:<span class="keyword">public</span> <a class="code" href="../../db/da5/classfastuidraw_1_1_stroking_data_selector_base.html">fastuidraw::StrokingDataSelectorBase</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keyword">explicit</span></div><div class="line">  CustomStrokingDataSelector(<span class="keyword">const</span> <a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;const fastuidraw::StrokingDataSelectorBase&gt;</a> &amp;base):</div><div class="line">    m_base(base)</div><div class="line">  {}</div><div class="line"></div><div class="line">  <span class="keyword">virtual</span></div><div class="line">  <span class="keywordtype">float</span></div><div class="line">  compute_thresh(<a class="code" href="../../de/df7/classfastuidraw_1_1c__array.html">fastuidraw::c_array&lt;const fastuidraw::uvec4&gt;</a> data,</div><div class="line">                 <span class="keywordtype">float</span> path_magnification,</div><div class="line">                 <span class="keywordtype">float</span> curve_flatness)<span class="keyword"> const override</span></div><div class="line"><span class="keyword">  </span>{</div><div class="line">    <span class="keywordflow">return</span> m_base-&gt;compute_thresh(data.<a class="code" href="../../de/df7/classfastuidraw_1_1c__array.html#aa73202f716ded74f65c63a0e7b2b88fa">sub_array</a>(3),</div><div class="line">                                  path_magnification,</div><div class="line">                                  curve_flatness);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keyword">virtual</span></div><div class="line">  <span class="keywordtype">void</span></div><div class="line">  stroking_distances(<a class="code" href="../../de/df7/classfastuidraw_1_1c__array.html">fastuidraw::c_array&lt;const fastuidraw::uvec4 &gt;</a> data,</div><div class="line">                     <a class="code" href="../../de/df7/classfastuidraw_1_1c__array.html">fastuidraw::c_array&lt;float&gt;</a> out_values)<span class="keyword"> const override</span></div><div class="line"><span class="keyword">  </span>{</div><div class="line">    m_base-&gt;stroking_distances(data.<a class="code" href="../../de/df7/classfastuidraw_1_1c__array.html#aa73202f716ded74f65c63a0e7b2b88fa">sub_array</a>(3), out_values);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keyword">virtual</span></div><div class="line">  <span class="keywordtype">bool</span></div><div class="line">  arc_stroking_possible(<a class="code" href="../../de/df7/classfastuidraw_1_1c__array.html">fastuidraw::c_array&lt;const fastuidraw::uvec4 &gt;</a> data)<span class="keyword"> const override</span></div><div class="line"><span class="keyword">  </span>{</div><div class="line">    <span class="keywordflow">return</span> m_base-&gt;arc_stroking_possible(data.<a class="code" href="../../de/df7/classfastuidraw_1_1c__array.html#aa73202f716ded74f65c63a0e7b2b88fa">sub_array</a>(3));</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keyword">virtual</span></div><div class="line">  <span class="keywordtype">bool</span></div><div class="line">  data_compatible(<a class="code" href="../../de/df7/classfastuidraw_1_1c__array.html">fastuidraw::c_array&lt;const fastuidraw::uvec4 &gt;</a> data)<span class="keyword"> const override</span></div><div class="line"><span class="keyword">  </span>{</div><div class="line">    <span class="keywordflow">return</span> m_base-&gt;data_compatible(data.<a class="code" href="../../de/df7/classfastuidraw_1_1c__array.html#aa73202f716ded74f65c63a0e7b2b88fa">sub_array</a>(3));</div><div class="line">  }</div><div class="line"></div><div class="line">  <a class="code" href="../../de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;const fastuidraw::StrokingDataSelectorBase&gt;</a> m_base;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* Finally, the actual function that generates the custom PainterStrokeShader.</span></div><div class="line"><span class="comment"> * This function needs to assign each of the 4 different shaders of its return</span></div><div class="line"><span class="comment"> * value correct, set the StrokingDataSelectorBase that matches with the shader</span></div><div class="line"><span class="comment"> * data and also set meta-data that FastUIDraw uses.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html">fastuidraw::PainterStrokeShader</a></div><div class="line">generate_stroke_shader(<span class="keyword">const</span> <a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html">fastuidraw::PainterStrokeShader</a> &amp;src)</div><div class="line">{</div><div class="line">  <span class="keyword">using namespace </span><a class="code" href="../../d4/d4c/namespacefastuidraw.html">fastuidraw</a>;</div><div class="line">  <span class="keyword">using namespace </span><a class="code" href="../../df/d7b/namespacefastuidraw_1_1glsl.html">fastuidraw::glsl</a>;</div><div class="line"></div><div class="line">  CustomShaderGenerator&lt;PainterItemShaderGLSL&gt; item_shaders;</div><div class="line">  CustomShaderGenerator&lt;PainterItemCoverageShaderGLSL&gt; cvg_shaders;</div><div class="line">  <a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html">PainterStrokeShader</a> return_value;</div><div class="line"></div><div class="line">  set_shader(return_value, item_shaders, cvg_shaders,</div><div class="line">             src, Painter::stroking_method_linear,</div><div class="line">             PainterStrokeShader::non_aa_shader);</div><div class="line"></div><div class="line">  set_shader(return_value, item_shaders, cvg_shaders,</div><div class="line">             src, Painter::stroking_method_arc,</div><div class="line">             PainterStrokeShader::non_aa_shader);</div><div class="line"></div><div class="line">  set_shader(return_value, item_shaders, cvg_shaders,</div><div class="line">             src, Painter::stroking_method_linear,</div><div class="line">             PainterStrokeShader::aa_shader);</div><div class="line"></div><div class="line">  set_shader(return_value, item_shaders, cvg_shaders,</div><div class="line">             src, Painter::stroking_method_arc,</div><div class="line">             PainterStrokeShader::aa_shader);</div><div class="line"></div><div class="line">  <span class="comment">/* The meta-data, PainterStrokeShader::fastest_anti_aliased_stroking_method() and</span></div><div class="line"><span class="comment">   * PainterStrokeShader::fastest_non_anti_aliased_stroking_method() is used by</span></div><div class="line"><span class="comment">   * FastUIDraw to select what stroking method to use when passed the value</span></div><div class="line"><span class="comment">   * PainterEnum::stroking_method_fastest.</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  return_value</div><div class="line">    .<a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html#a9dd8ad3508c948053f90b7f3972ceed2">stroking_data_selector</a>(<a class="code" href="../../da/d46/group___utility.html#ga524a8b6674554f360cf8b04a3a6a37b0">FASTUIDRAWnew</a> CustomStrokingDataSelector(src.<a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html#a9dd8ad3508c948053f90b7f3972ceed2">stroking_data_selector</a>()))</div><div class="line">    .fastest_non_anti_aliased_stroking_method(src.<a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html#a01b57320692ea1d6c06fc6bfc8a9d042">fastest_non_anti_aliased_stroking_method</a>())</div><div class="line">    .fastest_anti_aliased_stroking_method(src.<a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html#a17892f12aec676e0e9455612b141b5f5">fastest_anti_aliased_stroking_method</a>());</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> return_value;</div><div class="line">}</div></div><!-- fragment --><p> The implementation of using the custom stroking is given by </p><div class="fragment"><div class="line"><span class="keyword">class </span>ExampleCustomPathShading:<span class="keyword">public</span> Initialization</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  ExampleCustomPathShading(DemoRunner *runner, <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv);</div><div class="line"></div><div class="line">  <span class="keyword">virtual</span></div><div class="line">  <span class="keywordtype">void</span></div><div class="line">  draw_frame(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div><div class="line"></div><div class="line">  <span class="keyword">virtual</span></div><div class="line">  <span class="keywordtype">void</span></div><div class="line">  handle_event(<span class="keyword">const</span> SDL_Event &amp;ev) <span class="keyword">override</span>;</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">  <a class="code" href="../../df/dea/classfastuidraw_1_1_path.html">fastuidraw::Path</a> m_path;</div><div class="line">  <a class="code" href="../../d3/d44/classfastuidraw_1_1_rect_t.html">fastuidraw::Rect</a> m_path_bounds;</div><div class="line">  <a class="code" href="../../db/da6/classfastuidraw_1_1_painter_stroke_shader.html">fastuidraw::PainterStrokeShader</a> m_stroke_shader;</div><div class="line">};</div><div class="line"></div><div class="line">ExampleCustomPathShading::</div><div class="line">ExampleCustomPathShading(DemoRunner *runner, <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv):</div><div class="line">  Initialization(runner, argc, argv)</div><div class="line">{</div><div class="line">  <span class="comment">/* In this example we build a complicated path using the</span></div><div class="line"><span class="comment">   * operator&lt;&lt; overloads that fastuidraw::Path defines.</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  m_path &lt;&lt; <a class="code" href="../../d0/df3/classfastuidraw_1_1_path_1_1contour__start.html">fastuidraw::Path::contour_start</a>(<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 460, 60 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 644, 134 )</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 544, 367 )</div><div class="line">         &lt;&lt; <a class="code" href="../../de/d60/classfastuidraw_1_1_path_1_1contour__end.html">fastuidraw::Path::contour_end</a>()</div><div class="line">         &lt;&lt; <a class="code" href="../../d0/df3/classfastuidraw_1_1_path_1_1contour__start.html">fastuidraw::Path::contour_start</a>(<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 560, 60 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 644, 367 )</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 744, 134 )</div><div class="line">         &lt;&lt; <a class="code" href="../../de/d60/classfastuidraw_1_1_path_1_1contour__end.html">fastuidraw::Path::contour_end</a>()</div><div class="line">         &lt;&lt; <a class="code" href="../../d0/df3/classfastuidraw_1_1_path_1_1contour__start.html">fastuidraw::Path::contour_start</a>(<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 0, 0 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../df/d77/classfastuidraw_1_1_path_1_1control__point.html">fastuidraw::Path::control_point</a>(<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 100, -100 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../df/d77/classfastuidraw_1_1_path_1_1control__point.html">fastuidraw::Path::control_point</a>(<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 200, 100 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 300, 0 )</div><div class="line">         &lt;&lt; <a class="code" href="../../df/dea/classfastuidraw_1_1_path.html#abf73b7206a30b16fe2c1db212835482b">fastuidraw::Path::arc_degrees</a>(233, <a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 500, 0 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 500, 100 )</div><div class="line">         &lt;&lt; <a class="code" href="../../df/dea/classfastuidraw_1_1_path.html#abf73b7206a30b16fe2c1db212835482b">fastuidraw::Path::arc_degrees</a>(212, <a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 500, 300 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../df/d77/classfastuidraw_1_1_path_1_1control__point.html">fastuidraw::Path::control_point</a>(<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 250, 200 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../df/d77/classfastuidraw_1_1_path_1_1control__point.html">fastuidraw::Path::control_point</a>(<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 125, 400 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 90, 120 )</div><div class="line">         &lt;&lt; <a class="code" href="../../df/dea/classfastuidraw_1_1_path.html#abf73b7206a30b16fe2c1db212835482b">fastuidraw::Path::arc_degrees</a>(290, <a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 20, 150 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( -40, 160 )</div><div class="line">         &lt;&lt; <a class="code" href="../../de/d60/classfastuidraw_1_1_path_1_1contour__end.html">fastuidraw::Path::contour_end</a>()</div><div class="line">         &lt;&lt; <a class="code" href="../../d0/df3/classfastuidraw_1_1_path_1_1contour__start.html">fastuidraw::Path::contour_start</a>(<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 59, 9 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 59, -209 )</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 519, -209 )</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 519, 9 )</div><div class="line">         &lt;&lt; <a class="code" href="../../df/dea/classfastuidraw_1_1_path.html#abf73b7206a30b16fe2c1db212835482b">fastuidraw::Path::arc_degrees</a>(-180, <a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>(100, -209))</div><div class="line">         &lt;&lt; <a class="code" href="../../d0/df3/classfastuidraw_1_1_path_1_1contour__start.html">fastuidraw::Path::contour_start</a>(<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 160, 60 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 344, 134 )</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 244, 367 )</div><div class="line">         &lt;&lt; <a class="code" href="../../de/d60/classfastuidraw_1_1_path_1_1contour__end.html">fastuidraw::Path::contour_end</a>()</div><div class="line">         &lt;&lt; <a class="code" href="../../d0/df3/classfastuidraw_1_1_path_1_1contour__start.html">fastuidraw::Path::contour_start</a>(<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 260, 60 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 344, 367 )</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 444, 134 )</div><div class="line">         &lt;&lt; <a class="code" href="../../de/d60/classfastuidraw_1_1_path_1_1contour__end.html">fastuidraw::Path::contour_end</a>()</div><div class="line">         &lt;&lt; <a class="code" href="../../d0/df3/classfastuidraw_1_1_path_1_1contour__start.html">fastuidraw::Path::contour_start</a>(<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( 360, 60 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 544, 134 )</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 444, 367 )</div><div class="line">         &lt;&lt; <a class="code" href="../../de/d60/classfastuidraw_1_1_path_1_1contour__end.html">fastuidraw::Path::contour_end</a>()</div><div class="line">         &lt;&lt; <a class="code" href="../../d0/df3/classfastuidraw_1_1_path_1_1contour__start.html">fastuidraw::Path::contour_start</a>(<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>( -60, -60 ))</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( -100, 300 )</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 60, 500 )</div><div class="line">         &lt;&lt; <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>( 200, 570 )</div><div class="line">         &lt;&lt; <a class="code" href="../../df/dea/classfastuidraw_1_1_path.html#abf73b7206a30b16fe2c1db212835482b">fastuidraw::Path::arc_degrees</a>(80, <a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>(300, 100))</div><div class="line">         &lt;&lt; <a class="code" href="../../de/d60/classfastuidraw_1_1_path_1_1contour__end.html">fastuidraw::Path::contour_end</a>();</div><div class="line"></div><div class="line"></div><div class="line">  <span class="comment">/* Get the approximate bounding box for the path. This approximate</span></div><div class="line"><span class="comment">   * bounding box computation is a cheap function returning cached</span></div><div class="line"><span class="comment">   * values.</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  m_path.approximate_bounding_box(&amp;m_path_bounds);</div><div class="line"></div><div class="line">  m_stroke_shader = generate_stroke_shader(m_painter_engine_gl-&gt;default_shaders().stroke_shader());</div><div class="line">  m_painter_engine_gl-&gt;register_shader(m_stroke_shader);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span></div><div class="line">ExampleCustomPathShading::</div><div class="line">draw_frame(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">  <a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a> translate, scale, window_dims(window_dimensions());</div><div class="line">  <a class="code" href="../../d2/d7d/classfastuidraw_1_1_painter_surface_1_1_viewport.html">fastuidraw::PainterSurface::Viewport</a> vwp(0, 0, window_dims.x(), window_dims.y());</div><div class="line">  <span class="keywordtype">float</span> stroke_width, border;</div><div class="line"></div><div class="line">  m_surface_gl-&gt;viewport(vwp);</div><div class="line">  m_painter-&gt;begin(m_surface_gl, <a class="code" href="../../d6/db7/classfastuidraw_1_1_painter_enums.html#a3e96faa847c849ddd2caea92b8a877e5a6e7fc1351dcd45f3d81025656670414c">fastuidraw::Painter::y_increases_downwards</a>);</div><div class="line"></div><div class="line">  <span class="comment">/* Set the translate and scale so that the path is stretched across</span></div><div class="line"><span class="comment">   * the entire window, but have some border around the path so that</span></div><div class="line"><span class="comment">   * all of the stroking is visible.</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  stroke_width = 8.0f;</div><div class="line">  border = 3.0f * stroke_width;</div><div class="line"></div><div class="line">  scale = window_dims / (m_path_bounds.size() + <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>(2.0f * border));</div><div class="line">  translate = -m_path_bounds.m_min_point + <a class="code" href="../../da/d46/group___utility.html#ga95ebcfae5ab0df7fe30d4fa95be4313d">fastuidraw::vec2</a>(border);</div><div class="line">  m_painter-&gt;shear(scale.<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html#a352ce463cb2d9bf75768431069d9b54e">x</a>(), scale.<a class="code" href="../../d1/d96/classfastuidraw_1_1vec_n.html#a264abd43907a8ffdce53e098514e2cd4">y</a>());</div><div class="line">  m_painter-&gt;translate(translate);</div><div class="line"></div><div class="line">  ExampleItemData data;</div><div class="line">  uint32_t ms;</div><div class="line">  <span class="keywordtype">float</span> fc, fs, fc2, fs2;</div><div class="line"></div><div class="line">  ms = SDL_GetTicks() % 4000;</div><div class="line"></div><div class="line">  data.m_phase = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(ms) / 2000.0f * <a class="code" href="../../da/d46/group___utility.html#ga82cb578eef1431ee8e6ee0a217226a4c">FASTUIDRAW_PI</a>;</div><div class="line">  fc = <a class="code" href="../../da/d46/group___utility.html#ga89048d9ce1ea9623d7c62c18120ca8b4">fastuidraw::t_cos</a>(data.m_phase);</div><div class="line">  fs = <a class="code" href="../../da/d46/group___utility.html#gac442079de89661e01770e914b0c07d94">fastuidraw::t_sin</a>(data.m_phase);</div><div class="line">  fc2 = <a class="code" href="../../da/d46/group___utility.html#ga89048d9ce1ea9623d7c62c18120ca8b4">fastuidraw::t_cos</a>(2.0f * data.m_phase);</div><div class="line">  fs2 = <a class="code" href="../../da/d46/group___utility.html#gac442079de89661e01770e914b0c07d94">fastuidraw::t_sin</a>(2.0f * data.m_phase);</div><div class="line"></div><div class="line">  data.m_domain_coeff = 10.0f * <a class="code" href="../../da/d46/group___utility.html#ga82cb578eef1431ee8e6ee0a217226a4c">FASTUIDRAW_PI</a> / (m_path_bounds.width() + m_path_bounds.height());</div><div class="line">  data.m_cos_coeffs = <a class="code" href="../../da/d46/group___utility.html#gabd4692a3df88468cfe902d9cec76e94c">fastuidraw::vec4</a>(+8.0f * fc,</div><div class="line">                                       -4.0f * fs,</div><div class="line">                                       +2.0f * fs2,</div><div class="line">                                       -1.0f * fc2);</div><div class="line">  data.m_sin_coeffs = <a class="code" href="../../da/d46/group___utility.html#gabd4692a3df88468cfe902d9cec76e94c">fastuidraw::vec4</a>(+1.3f * fs,</div><div class="line">                                       -2.0f * fc,</div><div class="line">                                       +4.0f * fs2,</div><div class="line">                                       -8.0f * fc2);</div><div class="line">  data.m_stroke_params.width(40.0f);</div><div class="line"></div><div class="line">  <a class="code" href="../../d9/d57/classfastuidraw_1_1_painter_brush.html">fastuidraw::PainterBrush</a> brush;</div><div class="line">  brush.<a class="code" href="../../d9/d57/classfastuidraw_1_1_painter_brush.html#ada4e8279af2a33eb3dde26fa43d43614">color</a>(1.0f, 0.6f, 0.0f, 0.8f);</div><div class="line"></div><div class="line">  m_painter-&gt;stroke_path(m_stroke_shader,</div><div class="line">                         <a class="code" href="../../da/db4/classfastuidraw_1_1_painter_data.html">fastuidraw::PainterData</a>(&amp;brush, &amp;data),</div><div class="line">                         m_path,</div><div class="line">                         <a class="code" href="../../d6/d1e/classfastuidraw_1_1_stroking_style.html">fastuidraw::StrokingStyle</a>()</div><div class="line">                         .join_style(<a class="code" href="../../d6/db7/classfastuidraw_1_1_painter_enums.html#aa55cf0286168b9eac4987b376fc8ffbca43c31892e1cacbc3f15df3eda0c43de2">fastuidraw::Painter::rounded_joins</a>)</div><div class="line">                         .cap_style(<a class="code" href="../../d6/db7/classfastuidraw_1_1_painter_enums.html#aa57a55ca84e32bfd33f39cdc8ba3b58aa5c175ac2ce1367be331fca16da7cb3c7">fastuidraw::Painter::rounded_caps</a>));</div><div class="line"></div><div class="line">  m_painter-&gt;end();</div><div class="line"></div><div class="line">  fastuidraw_glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);</div><div class="line">  fastuidraw_glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);</div><div class="line">  m_surface_gl-&gt;blit_surface(GL_NEAREST);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span></div><div class="line">ExampleCustomPathShading::</div><div class="line">handle_event(<span class="keyword">const</span> SDL_Event &amp;ev)</div><div class="line">{</div><div class="line">  <span class="keywordflow">switch</span> (ev.type)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> SDL_KEYDOWN:</div><div class="line">      <span class="keywordflow">switch</span> (ev.key.keysym.sym)</div><div class="line">        {</div><div class="line">        }</div><div class="line">      <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">  Initialization::handle_event(ev);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span></div><div class="line">main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line">{</div><div class="line">  DemoRunner demo;</div><div class="line">  <span class="keywordflow">return</span> demo.main&lt;ExampleCustomPathShading&gt;(argc, argv);</div><div class="line">}</div><div class="line"></div></div><!-- fragment --></div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
