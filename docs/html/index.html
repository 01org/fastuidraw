<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FastUIDraw: FastUIDraw</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FastUIDraw
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">FastUIDraw </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Purpose"></a>
Purpose</h1>
<p>FastUIDraw provides a high performance, programmable implementation of canvas, found in the class <a class="el" href="da/de0/classfastuidraw_1_1_painter.html" title="Painter implements a canvas rendering interface. ">fastuidraw::Painter</a>. FastUIDraw's implementation of canvas reduces the CPU load dramatically and uses a very small number of graphics pipeline states (for example the GL backend using only the features of GL core v3.3, has only 3 pipeline states to implement all of the traditional canvas interface and all 12 Porter-Duff blending modes). An API trace of the GL backend of FastUIDraw in action will show that there are only a handful of draw calls per frame (even if there are many different kinds of elements drawn) with very few, if any, pipeline state changes.</p>
<h1><a class="anchor" id="Features"></a>
Features</h1>
<p>The features of <a class="el" href="da/de0/classfastuidraw_1_1_painter.html" title="Painter implements a canvas rendering interface. ">fastuidraw::Painter</a> (with the GL backend) are:</p><ul>
<li>Brush (embodied by <a class="el" href="d9/d57/classfastuidraw_1_1_painter_brush.html" title="A PainterBrush defines a brush for painting via Painter. ">fastuidraw::PainterBrush</a>)<ol type="1">
<li>linear gradient</li>
<li>radial gradient</li>
<li>repeat window</li>
<li>linear brush tranformation</li>
<li>image (and repeat image)</li>
<li>"starting" constant pen color</li>
</ol>
</li>
<li>Drawing primitives<ol type="1">
<li>path stroking<ol type="a">
<li>Ability to change stroking width without recomputation of any data</li>
<li>Joins<ul>
<li>Miter Joins</li>
<li>Bevel Joins</li>
<li>Rounded Joins</li>
</ul>
</li>
<li>Caps<ul>
<li>Square Caps</li>
<li>Rounded Caps</li>
<li>Flat Caps</li>
</ul>
</li>
</ol>
</li>
<li>Path filling (against arbitary fill rules)</li>
<li>GPU rendered glyphs</li>
<li>Quads</li>
<li>Ability for application to have custom drawing types via shaders</li>
</ol>
</li>
<li>Clipping<ol type="1">
<li>ClipIn against filled paths</li>
<li>ClipOut against filled paths</li>
</ol>
</li>
<li>Blend Modes<ol type="1">
<li>All Porter-Duff blend modes</li>
<li>Ability for application to have custom blending types via shaders</li>
</ol>
</li>
</ul>
<h1><a class="anchor" id="Concepts"></a>
Concepts</h1>
<p>FastUIDraw strongly distinguishes between "what" to draw and "how" to draw. The "what" to draw is embodied by attribute and index data. This data is expected to be reused and, for the <a class="el" href="da/de0/classfastuidraw_1_1_painter.html" title="Painter implements a canvas rendering interface. ">fastuidraw::Painter</a> interface, is embodied by the <a class="el" href="d9/d77/classfastuidraw_1_1_painter_attribute_data.html" title="PainterAttributeData represents the attribute and index data ready to be consumed by a Painter...">fastuidraw::PainterAttributeData</a>. The "how" to draw is small amounts of data that includes transformation state, brush state and so on. For the class <a class="el" href="da/de0/classfastuidraw_1_1_painter.html" title="Painter implements a canvas rendering interface. ">fastuidraw::Painter</a>, the "how" to draw is embodied by <a class="el" href="da/db4/classfastuidraw_1_1_painter_data.html" title="A PainterData provides the data for how for a Painter to draw content. ">fastuidraw::PainterData</a>. The expectation is "how" to draw can be changed without incurring significant CPU load.</p>
<h1><a class="anchor" id="Resources"></a>
Resources</h1>
<p>All of the "resources" used by a canvas are to reside on a set of atlases:</p><ul>
<li>Images reside on a <a class="el" href="d7/d13/classfastuidraw_1_1_image_atlas.html" title="An ImageAtlas is a common location to place images of an application. ">fastuidraw::ImageAtlas</a> (see also <a class="el" href="dc/dd5/classfastuidraw_1_1_image.html" title="An Image represents an image comprising of RGBA8 values. The texel values themselves are stored in a ...">fastuidraw::Image</a>)</li>
<li>Glyphs reside on a <a class="el" href="da/da8/classfastuidraw_1_1_glyph_atlas.html" title="A GlyphAtlas is a common location to place glyph data of an application. Ideally, all glyph data is p...">fastuidraw::GlyphAtlas</a> (see also <a class="el" href="d7/df2/classfastuidraw_1_1_glyph.html" title="A Glyph is essentially an opaque pointer to data for rendering and performing layout of a glyph...">fastuidraw::Glyph</a>)</li>
<li>Color stops reside on a <a class="el" href="db/d62/classfastuidraw_1_1_color_stop_atlas.html" title="A ColorStopAtlas is a common location to all color stop data of an application. Ideally, all color stop sequences are placed into a single ColorStopAtlas (changes of ColorStopAtlas force draw-call breaks). ">fastuidraw::ColorStopAtlas</a> (see also <a class="el" href="d8/d4e/classfastuidraw_1_1_color_stop_sequence_on_atlas.html" title="A ColorStopSequenceOnAtlas is a ColorStopSequence on a ColorStopAtlas. A ColorStopAtlas is backed by ...">fastuidraw::ColorStopSequenceOnAtlas</a>) An instance of <a class="el" href="da/de0/classfastuidraw_1_1_painter.html" title="Painter implements a canvas rendering interface. ">fastuidraw::Painter</a> has that it sources all its resources from a fixed set of atlases.</li>
</ul>
<h1><a class="anchor" id="Text"></a>
Text</h1>
<p>The elements in the group <a class="el" href="index.html#Text">Text</a> are for the realization of glyphs. FastUIDraw does <em>NOT</em> provide functions for layout of glyphs. The API exposed through <a class="el" href="d3/da9/classfastuidraw_1_1_glyph_sequence.html" title="A GlyphSequence represents a sequence of glyph codes with positions. A GlyphSequence provides an inte...">fastuidraw::GlyphSequence</a> is that an application provides a sequence of glyphs, glyph positions and the the size at which the text has been layed out. Glyph objects reside on a <a class="el" href="d7/d38/classfastuidraw_1_1_glyph_cache.html" title="A GlyphCache represents a cache of glyphs and manages the uploading of the data to a GlyphAtlas...">fastuidraw::GlyphCache</a> which provides an interface to fetch glyphs from a glyph code and a fastuidraw::GlyphRender. A fastuidraw::GlyphRender specifies the type of resource data on how to render glyphs. The class fastuidraw::GlyphSelector provides assistance for selection of glyphs from character codes, but an application can use any system it likes for glyph selection. FastUIDraw has the class <a class="el" href="da/d34/classfastuidraw_1_1_font_free_type.html" title="A FontFreeType implements the interface of FontBase from a scalable font loaded by libfreetype...">fastuidraw::FontFreeType</a> to construct a font via Freetype (either from a file or FT_Face). Below is an example of startup code and simple layout code. </p><div class="fragment"><div class="line"><span class="comment">//startup</span></div><div class="line">  <span class="comment">// choose an orientation convention</span></div><div class="line">  <span class="comment">//  # y_increases_downwards --&gt; y = 0 is at top of the window and increases down the window</span></div><div class="line">  <span class="comment">//  # y_increases_upwards   --&gt; y = 0 is at bottom of the window and increases up the window</span></div><div class="line">  <span class="keyword">enum</span> <a class="code" href="d6/db7/classfastuidraw_1_1_painter_enums.html#a3e96faa847c849ddd2caea92b8a877e5">fastuidraw::PainterEnums::screen_orientation</a> myOrientation(PainterEnums::y_increases_downwards);</div><div class="line"></div><div class="line">  <span class="comment">//use GL backend atlas</span></div><div class="line">  <a class="code" href="de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::GlyphAtlas&gt;</a> myGlyphAtlas;</div><div class="line">  myGlyphAtlas = <a class="code" href="da/d46/group___utility.html#ga524a8b6674554f360cf8b04a3a6a37b0">FASTUIDRAWnew</a> <a class="code" href="d8/de5/classfastuidraw_1_1gl_1_1_glyph_atlas_g_l.html">fastuidraw::gl::GlyphAtlasGL</a>(<a class="code" href="d0/de1/classfastuidraw_1_1gl_1_1_glyph_atlas_g_l_1_1params.html">fastuidraw::gl::GlyphAtlasGL::params</a>());</div><div class="line"></div><div class="line">  <span class="comment">//setup glyph cache and glyph selector; the glyph selector</span></div><div class="line">  <span class="comment">//is a VERY simple class to enable finding glyphs from fonts</span></div><div class="line">  <span class="comment">//and falling back to other fonts when a glyph cannot be found</span></div><div class="line">  <a class="code" href="de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::GlyphCache&gt;</a> myGlyphCache;</div><div class="line">  <a class="code" href="de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::GlyphSelector&gt;</a> myGlyphSelector;</div><div class="line">  myGlyphCache = <a class="code" href="da/d46/group___utility.html#ga524a8b6674554f360cf8b04a3a6a37b0">FASTUIDRAWnew</a> <a class="code" href="d7/d38/classfastuidraw_1_1_glyph_cache.html">fastuidraw::GlyphCache</a>(myGlyphAtlas);</div><div class="line">  myGlyphSelector = <a class="code" href="da/d46/group___utility.html#ga524a8b6674554f360cf8b04a3a6a37b0">FASTUIDRAWnew</a> fastuidraw::GlyphSelector();</div><div class="line"></div><div class="line">  <span class="comment">//create a generator object that the font uses to load the font data,</span></div><div class="line">  <span class="comment">//in this example we load the font contents from a file directly.</span></div><div class="line">  <a class="code" href="de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::FreeTypeFace::GeneratorBase&gt;</a> gen;</div><div class="line">  gen = <a class="code" href="da/d46/group___utility.html#ga524a8b6674554f360cf8b04a3a6a37b0">FASTUIDRAWnew</a> <a class="code" href="db/dff/classfastuidraw_1_1_free_type_face_1_1_generator_file.html">fastuidraw::FreeTypeFace::GeneratorFile</a>(<span class="stringliteral">&quot;myFont.ttf&quot;</span>, 0);</div><div class="line"></div><div class="line">  <span class="comment">//create the font</span></div><div class="line">  myFont = <a class="code" href="da/d46/group___utility.html#ga524a8b6674554f360cf8b04a3a6a37b0">FASTUIDRAWnew</a> <a class="code" href="da/d34/classfastuidraw_1_1_font_free_type.html">fastuidraw::FontFreeType</a>(gen);</div><div class="line"></div><div class="line">  <span class="comment">//add font to GlyphSelector</span></div><div class="line">  myGlyphSelector-&gt;add_font(font);</div><div class="line"></div><div class="line"><span class="comment">//creating glyph sequence.</span></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *text = <span class="stringliteral">&quot;Hello World&quot;</span>;</div><div class="line">  <span class="keywordtype">float</span> layout_pixel_size(32.0f); <span class="comment">//a pixel size by which to layout text</span></div><div class="line">  std::vector&lt;fastuidraw::Glyph&gt; glyphs;</div><div class="line">  std::vector&lt;fastuidraw::vec2&gt; glyph_positions;</div><div class="line">  <a class="code" href="d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a> pen_position(0.0f, 0.0f);</div><div class="line">  <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keywordtype">char</span> *p = text; *p; ++p)</div><div class="line">    {</div><div class="line">      <a class="code" href="d6/d25/classfastuidraw_1_1_glyph_source.html">fastuidraw::GlyphSource</a> g;</div><div class="line">      g = myGlyphSelector-&gt;fetch_glyph(myFont, *p);</div><div class="line">      <span class="keywordflow">if</span>(g.<a class="code" href="d6/d25/classfastuidraw_1_1_glyph_source.html#aac33c581effa95bed51bf929e6ecc395">m_font</a>)</div><div class="line">        {</div><div class="line">          glyphs.push_back(g);</div><div class="line">          glyph_positions.push_back(pen_positions);</div><div class="line"></div><div class="line">          <a class="code" href="d2/d4c/classfastuidraw_1_1_glyph_metrics.html">fastuidraw::GlyphMetrics</a> m;</div><div class="line">          <span class="keywordtype">float</span> ratio;</div><div class="line"></div><div class="line">          m = myGlyphCache-&gt;<a class="code" href="d7/d38/classfastuidraw_1_1_glyph_cache.html#a3739a033f9336daf3ac1530f28cf456a">fetch_glyph_metrics</a>(g.<a class="code" href="d6/d25/classfastuidraw_1_1_glyph_source.html#aac33c581effa95bed51bf929e6ecc395">m_font</a>, g.<a class="code" href="d6/d25/classfastuidraw_1_1_glyph_source.html#a260f47c6a8cbc0fcada4b5480fffcdcf">m_glyph_code</a>);</div><div class="line">          ratio = layout_pixel_size / m.m_units_per_EM;</div><div class="line">          pen_positions.x() += ratio * m.m_advance.x();</div><div class="line">        }</div><div class="line">    }</div><div class="line">  <a class="code" href="d3/da9/classfastuidraw_1_1_glyph_sequence.html">fastuidraw::GlyphSequence</a> myHelloWorld(layout_pixel_size,</div><div class="line">                                         myOrientation,</div><div class="line">                                         myGlyphCache);</div></div><!-- fragment --><p> Notes:</p><ul>
<li>One does not need to use fastuidraw::GlyphSelector at all, one can choose glyph codes directly</li>
<li>The above layout is very limited, but because an application can construct fonts from FT_Face objects, one can use text shaping and layout libraries of one's choice to perform layout.</li>
</ul>
<h1><a class="anchor" id="CustomDrawing"></a>
Custom Drawing</h1>
<p>In addition to drawing glyph sequences, rectangles, filling and stroking paths, FastUIDraw provides an interface to applications to create attribute and data as it sees fit. For drawing of an item there are three kinds of data used to draw an item.</p><ol type="1">
<li>Attribute data which is value per vertex emitted. Attribute data is realized by <a class="el" href="d7/d5e/classfastuidraw_1_1_painter_attribute.html" title="The attribute data generated/filled by Painter. Attribute data is sent to 3D API as raw bits with the...">fastuidraw::PainterAttribute</a> values.</li>
<li>Index data is indices into an array of <a class="el" href="d7/d5e/classfastuidraw_1_1_painter_attribute.html" title="The attribute data generated/filled by Painter. Attribute data is sent to 3D API as raw bits with the...">fastuidraw::PainterAttribute</a> to specify what triangles to draw. Indices are realized as <a class="el" href="d1/dd6/group___painter_attribute.html#ga4ca331d8a5d5ca308cfe3850d6606519" title="Typedef for the index type used by Painter. ">fastuidraw::PainterIndex</a> values.</li>
<li>Reused data is data that is common to all vertices and pixels of an item or even multiple items. This data is realized by <a class="el" href="d5/de6/unionfastuidraw_1_1generic__data.html" title="Union to store 32-bit data. ">fastuidraw::generic_data</a>. This data is realized as part of <a class="el" href="da/db4/classfastuidraw_1_1_painter_data.html#aac1b397f2bb8822680aa6df951e1ff59">fastuidraw::PainterData::m_item_shader_data</a>.</li>
</ol>
<p>To draw custom data, use the function <a class="el" href="da/de0/classfastuidraw_1_1_painter.html#a62d0a34036d9ff758ff1fda5fcd8a208">fastuidraw::Painter::draw_generic()</a>. The object <a class="el" href="db/d83/classfastuidraw_1_1_painter_item_shader.html" title="A PainterItemShader represents a shader to draw an item (typically a vertex and fragment shader pair)...">fastuidraw::PainterItemShader</a> encapsulates how to process vertices and fragments for the draw. A custom shader is tied to the backend. However, these classes are only the interface for <a class="el" href="da/de0/classfastuidraw_1_1_painter.html" title="Painter implements a canvas rendering interface. ">fastuidraw::Painter</a>. The actual shading code is tied to the GPU API one is using. For GL (and GLES) backend, the shader class is the class <a class="el" href="d0/d65/classfastuidraw_1_1glsl_1_1_painter_item_shader_g_l_s_l.html" title="A PainterItemShaderGLSL is a collection of GLSL source code fragments for a PainterShaderRegistrarGLS...">fastuidraw::glsl::PainterItemShaderGLSL</a>. In that class, one writes GLSL code. WARNING: if one write incorrect GLSL code, the uber-shader will fail to compile and all painting is then disabled!</p>
<p>All pixels are passed through the brush of <a class="el" href="da/de0/classfastuidraw_1_1_painter.html" title="Painter implements a canvas rendering interface. ">fastuidraw::Painter</a>, embodied by <a class="el" href="d9/d57/classfastuidraw_1_1_painter_brush.html" title="A PainterBrush defines a brush for painting via Painter. ">fastuidraw::PainterBrush</a>. That brush class contains the abiltiy to apply gradients (linear, radial), repeat windowing, transformation of brush image, pen color and image (complete with repeating and filtering the image).</p>
<h1><a class="anchor" id="Example"></a>
Example</h1>
<p>Below is an example of how to use <a class="el" href="da/de0/classfastuidraw_1_1_painter.html" title="Painter implements a canvas rendering interface. ">fastuidraw::Painter</a> </p><div class="fragment"><div class="line"><span class="comment">///////////////////////////////////////////////////////</span></div><div class="line"><span class="comment"></span><span class="comment">// startup code, create data that is repeatedly used //</span><span class="comment"></span></div><div class="line"><span class="comment">///////////////////////////////////////////////////////</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">// choose an orientation convention</span></div><div class="line"><span class="comment">//  # y_increases_downwards --&gt; y = 0 is at top of the window and increases down the window</span></div><div class="line"><span class="comment">//  # y_increases_upwards   --&gt; y = 0 is at bottom of the window and increases up the window</span></div><div class="line"><span class="keyword">enum</span> <a class="code" href="d6/db7/classfastuidraw_1_1_painter_enums.html#a3e96faa847c849ddd2caea92b8a877e5">fastuidraw::PainterEnums::screen_orientation</a> myOrientation(PainterEnums::y_increases_downwards);</div><div class="line"></div><div class="line"><span class="comment">// create a path to render, it is always better to save</span></div><div class="line"><span class="comment">// your path objects to be reused each frame. A Path</span></div><div class="line"><span class="comment">// caches its tessellations, how to stroke and fill</span></div><div class="line"><span class="comment">// components. Recreating a path means all tha data</span></div><div class="line"><span class="comment">// must be regenerated.</span></div><div class="line"><a class="code" href="df/dea/classfastuidraw_1_1_path.html">fastuidraw::Path</a> myPath;</div><div class="line">myPath</div><div class="line">.<a class="code" href="df/dea/classfastuidraw_1_1_path.html#a02da6cad1008a5e16773b0081e2e83ea">move</a>(<a class="code" href="d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>(0.0f, 0.0f))</div><div class="line">.<a class="code" href="df/dea/classfastuidraw_1_1_path.html#ae515b12b23053fb5e6b4a70c0ab021bc">line_to</a>(<a class="code" href="d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>(100.0f, 0.0f))</div><div class="line">.<a class="code" href="df/dea/classfastuidraw_1_1_path.html#adee30e2bc51c8d5331752a124037c0fd">quadratic_to</a>(<a class="code" href="d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>(100, 50.0f), <a class="code" href="d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>(100.0f, 100.0f))</div><div class="line">.<a class="code" href="df/dea/classfastuidraw_1_1_path.html#a4a6ab2e7509836bc7eb24641a24de33a">close_contour_arc</a>(45.0 * <a class="code" href="da/d46/group___utility.html#ga82cb578eef1431ee8e6ee0a217226a4c">FASTUIDRAW_PI</a> / 180.0f);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// formatting text should also know the size of</span></div><div class="line"><span class="comment">// of the text. When formatting text, the class</span></div><div class="line"><span class="comment">// GlyphMetrics informs how to scale the glyph</span></div><div class="line"><span class="comment">// for any size/</span></div><div class="line"><span class="keywordtype">int</span> myTextFormattingSize;</div><div class="line"></div><div class="line"><span class="comment">// generate glyphs and glyph_positions, a GlyphSource</span></div><div class="line"><span class="comment">// specifies both a font and glyph code to use;</span></div><div class="line"><span class="comment">// one can load fonts directly via FontFreeType</span></div><div class="line"><span class="comment">// or can use GlyphSelector to select glyphs from</span></div><div class="line"><span class="comment">// fonts added to it</span></div><div class="line"><a class="code" href="d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a> *glyph_positions;</div><div class="line"><a class="code" href="d6/d25/classfastuidraw_1_1_glyph_source.html">fastuidraw::GlyphSource</a> *glyphs;</div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> number_glyphs;</div><div class="line"></div><div class="line"><span class="comment">// a GlyphSequence holds the formatted text and lazily generates</span></div><div class="line"><span class="comment">// data to feed Painter for drawing text, save and reuse this object</span></div><div class="line"><span class="comment">// to draw your text.</span></div><div class="line"><a class="code" href="d3/da9/classfastuidraw_1_1_glyph_sequence.html">fastuidraw::GlyphSequence</a> myGlyphSequence(myTextFormattingSize,</div><div class="line">                                          <a class="code" href="d6/db7/classfastuidraw_1_1_painter_enums.html#a3e96faa847c849ddd2caea92b8a877e5a6e7fc1351dcd45f3d81025656670414c">fastuidraw::PainterEnums::y_increases_downwards</a>,</div><div class="line">                                          myGlyphCache);</div><div class="line"></div><div class="line"><span class="comment">// copy the glyph choices and positions into your GlyphSequence object that you keep.</span></div><div class="line">myGlyphSequence.add_glyphs(<a class="code" href="de/df7/classfastuidraw_1_1c__array.html">fastuidraw::c_array&lt;const fastuidraw::GlyphSource&gt;</a>(glyphs, number_glyphs),</div><div class="line">                           <a class="code" href="de/df7/classfastuidraw_1_1c__array.html">fastuidraw::c_array&lt;const fastuidraw::vec2&gt;</a>(glyph_positions, number_glyphs));</div><div class="line"></div><div class="line"><span class="comment">// create and save an image</span></div><div class="line"><a class="code" href="de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::Image&gt;</a> myImage;</div><div class="line">myImage = <a class="code" href="dc/dd5/classfastuidraw_1_1_image.html#a91693d938161d94c6161b89d37ad647c">fastuidraw::Image::create</a>(myImageAtlas, width, height, pixels,</div><div class="line">                                   fastuidraw::PainterBrush::slack_requirement(<a class="code" href="d9/d57/classfastuidraw_1_1_painter_brush.html#a4605967d230debe8ec8f3906b6d6c49aa4ea8abfeb7de944952cad8c2abebf2cc">fastuidraw::PainterBrush::image_filter_cubic</a>));</div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">//////////////////////////////////////</span></div><div class="line"><span class="comment"></span><span class="comment">// rendering code called many times //</span><span class="comment"></span></div><div class="line"><span class="comment">//////////////////////////////////////</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">// painter is of type reference_counted_ptr&lt;Painter&gt;</span></div><div class="line"><a class="code" href="da/de0/classfastuidraw_1_1_painter.html">fastuidraw::Painter</a> *p;</div><div class="line">p = painter.get(); <span class="comment">//Only using pointer instead of handle so that doxygen links to functions correctly.</span></div><div class="line"></div><div class="line">p-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#a52aa170f6c6f07964f907d7afead7398">begin</a>(surface, myOrientation); <span class="comment">//pass the surface one made at application initialization</span></div><div class="line"></div><div class="line"><a class="code" href="d9/d57/classfastuidraw_1_1_painter_brush.html">fastuidraw::PainterBrush</a> brush;</div><div class="line"></div><div class="line">brush.<a class="code" href="d9/d57/classfastuidraw_1_1_painter_brush.html#ada4e8279af2a33eb3dde26fa43d43614">color</a>(0.0f, 0.0f, 1.0f, 0.5f);</div><div class="line">p-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#ae198843e511cf93a7095cef1282df8db">fill_path</a>(<a class="code" href="da/db4/classfastuidraw_1_1_painter_data.html">fastuidraw::PainterData</a>(&amp;brush),</div><div class="line">             myPath, <a class="code" href="d6/db7/classfastuidraw_1_1_painter_enums.html#a22fe6f492c30865a274792bf10ce7d69a6a67a1b2373aacb21fd50bf93ed8a181">fastuidraw::PainterEnums::odd_even_fill_rule</a>);</div><div class="line"></div><div class="line">p-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#a2c980236887e6f85f5145677c30c904e">save</a>();</div><div class="line">p-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#a200b263724410137a868ecf0fcde1e29">clip_in_path</a>(myPath, <a class="code" href="d6/db7/classfastuidraw_1_1_painter_enums.html#a22fe6f492c30865a274792bf10ce7d69a6a67a1b2373aacb21fd50bf93ed8a181">fastuidraw::PainterEnums::odd_even_fill_rule</a>);</div><div class="line">p-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#af8eefd90a811f3a6dfcd6d2308188fa4">translate</a>(<a class="code" href="d1/d96/classfastuidraw_1_1vec_n.html">fastuidraw::vec2</a>(50.0f, 50.0f));</div><div class="line">p-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#ab98a2ea6aa3a1a228b8c94a1e049e3d9">rotate</a>(23.0f * <a class="code" href="da/d46/group___utility.html#ga82cb578eef1431ee8e6ee0a217226a4c">FASTUIDRAW_PI</a> / 180.0f);</div><div class="line">brush.<a class="code" href="d9/d57/classfastuidraw_1_1_painter_brush.html#ada4e8279af2a33eb3dde26fa43d43614">color</a>(1.0f, 1.0f, 0.0f, 1.0f);</div><div class="line">p-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#a8c1d06f2355dcc1c7e65e10188e9fb24">draw_glyphs</a>(<a class="code" href="da/db4/classfastuidraw_1_1_painter_data.html">fastuidraw::PainterData</a>(&amp;brush), myStaticText);</div><div class="line">p-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#a4fdbf10e92a753872576bfd8fd61b49e">restore</a>();</div><div class="line"></div><div class="line"><span class="comment">// brush controls the brush applied to the stroking</span></div><div class="line">brush.<a class="code" href="d9/d57/classfastuidraw_1_1_painter_brush.html#ada4e8279af2a33eb3dde26fa43d43614">color</a>(1.0f, 1.0f, 1.0f, 1.0f);</div><div class="line">brush.<a class="code" href="d9/d57/classfastuidraw_1_1_painter_brush.html#a2256ec9b3d0efa4435b74685d0983d39">image</a>(myImage, <a class="code" href="d9/d57/classfastuidraw_1_1_painter_brush.html#a4605967d230debe8ec8f3906b6d6c49aa4ea8abfeb7de944952cad8c2abebf2cc">fastuidraw::PainterBrush::image_filter_cubic</a>);</div><div class="line"></div><div class="line"><span class="comment">// stroke_params controls the stroking width and miter-limit</span></div><div class="line"><a class="code" href="df/df5/classfastuidraw_1_1_painter_stroke_params.html">fastuidraw::PainterStrokeParams</a> stroke_params;</div><div class="line">stroke_params.<a class="code" href="df/df5/classfastuidraw_1_1_painter_stroke_params.html#a1f4d0e32b5f86483dcbeee497939b6a0">miter_limit</a>(2.0f);</div><div class="line">stroke_params.<a class="code" href="df/df5/classfastuidraw_1_1_painter_stroke_params.html#a5d4cf271a795b8ba90a7ac95a570adae">width</a>(10.0f);</div><div class="line"></div><div class="line"><span class="comment">// stroking style controls cap-style, join-style, if to draw</span></div><div class="line"><span class="comment">// the closing edge of the contours and how to anti-alias</span></div><div class="line"><a class="code" href="d6/d1e/classfastuidraw_1_1_stroking_style.html">fastuidraw::StrokingStyle</a> stroking_style;</div><div class="line">stroking_style.<a class="code" href="d6/d1e/classfastuidraw_1_1_stroking_style.html#a122291c0950a2f806ecdbf57b6bad8ec">cap_style</a>(<a class="code" href="d6/db7/classfastuidraw_1_1_painter_enums.html#aa57a55ca84e32bfd33f39cdc8ba3b58aa24e58db6553eb46347e5c71ace02b05f">fastuidraw::PainterEnums::flat_caps</a>);</div><div class="line">stroking_style.<a class="code" href="d6/d1e/classfastuidraw_1_1_stroking_style.html#ad01e8ba8384875c4296cb18f9a2169e0">join_style</a>(<a class="code" href="d6/db7/classfastuidraw_1_1_painter_enums.html#aa55cf0286168b9eac4987b376fc8ffbca43c31892e1cacbc3f15df3eda0c43de2">fastuidraw::PainterEnums::rounded_joins</a>);</div><div class="line"></div><div class="line">p-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#abbcd3666a38f57feb79878b7b8dc4691">stroke_path</a>(<a class="code" href="da/db4/classfastuidraw_1_1_painter_data.html">fastuidraw::PainterData</a>(&amp;brush, &amp;stroke_params),</div><div class="line">               myPath, stroking_style);</div><div class="line"></div><div class="line">brush.<a class="code" href="d9/d57/classfastuidraw_1_1_painter_brush.html#ada4e8279af2a33eb3dde26fa43d43614">color</a>(0.4, 0.4, 1.0, 1.0);</div><div class="line">p-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#a8c1d06f2355dcc1c7e65e10188e9fb24">draw_glyphs</a>(<a class="code" href="da/db4/classfastuidraw_1_1_painter_data.html">fastuidraw::PainterData</a>(&amp;brush), myGlyphSequence);</div><div class="line"></div><div class="line">p-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#a36fdc36656a738b260c48dd72b6e23c4">end</a>(); <span class="comment">//on end() contents of surface can be used</span></div></div><!-- fragment --><h2><a class="anchor" id="Backends"></a>
Backends</h2>
<p>FastUIDraw is designed to support GPU API's beyond OpenGL and OpenGL ES. To that end, FastUIDraw has a core (represented by libFastUIDraw) and an interface to create a backend. A backend implementation encompasses creating backend classes for the following base interface classes</p><ul>
<li><a class="el" href="d7/d13/classfastuidraw_1_1_image_atlas.html" title="An ImageAtlas is a common location to place images of an application. ">fastuidraw::ImageAtlas</a> (the GL backend class is given by <a class="el" href="d1/d61/classfastuidraw_1_1gl_1_1_image_atlas_g_l.html" title="An ImageAtlasGL is the GL(and GLES) backend implementation for ImageAtlas. ">fastuidraw::gl::ImageAtlasGL</a>)</li>
<li><a class="el" href="db/d62/classfastuidraw_1_1_color_stop_atlas.html" title="A ColorStopAtlas is a common location to all color stop data of an application. Ideally, all color stop sequences are placed into a single ColorStopAtlas (changes of ColorStopAtlas force draw-call breaks). ">fastuidraw::ColorStopAtlas</a> (the GL backend class is given by <a class="el" href="d6/d2e/classfastuidraw_1_1gl_1_1_color_stop_atlas_g_l.html" title="An ColorStopAtlasGL is the GL(and GLES) backend implementation for ColorStopAtlas. ">fastuidraw::gl::ColorStopAtlasGL</a>)</li>
<li><a class="el" href="da/da8/classfastuidraw_1_1_glyph_atlas.html" title="A GlyphAtlas is a common location to place glyph data of an application. Ideally, all glyph data is p...">fastuidraw::GlyphAtlas</a> (the GL backend class is given by <a class="el" href="d8/de5/classfastuidraw_1_1gl_1_1_glyph_atlas_g_l.html" title="A GlyphAtlasGL is the GL(and GLES) backend implementation for GlyphAtlas. ">fastuidraw::gl::GlyphAtlasGL</a>)</li>
<li><a class="el" href="de/da0/classfastuidraw_1_1_painter_backend.html" title="A PainterBackend is an interface that defines the API-specific elements to implement Painter...">fastuidraw::PainterBackend</a> (the GL backend class is given by <a class="el" href="dc/da8/classfastuidraw_1_1gl_1_1_painter_backend_g_l.html" title="A PainterBackendGL implements PainterBackend using the GL (or GLES) API. ">fastuidraw::gl::PainterBackendGL</a>)</li>
<li><a class="el" href="d7/d7e/classfastuidraw_1_1_painter_blend_shader.html" title="A PainterBlendShader represents a shader for performing blending operations. ">fastuidraw::PainterBlendShader</a> (the GL backend class is given by <a class="el" href="d8/dc7/classfastuidraw_1_1glsl_1_1_painter_blend_shader_g_l_s_l.html" title="A PainterBlendShaderGLSL is a PainterBlendShader whose shader code fragment is via GLSL...">fastuidraw::glsl::PainterBlendShaderGLSL</a>)</li>
<li><a class="el" href="db/d83/classfastuidraw_1_1_painter_item_shader.html" title="A PainterItemShader represents a shader to draw an item (typically a vertex and fragment shader pair)...">fastuidraw::PainterItemShader</a> (the GL backend class is given by <a class="el" href="d0/d65/classfastuidraw_1_1glsl_1_1_painter_item_shader_g_l_s_l.html" title="A PainterItemShaderGLSL is a collection of GLSL source code fragments for a PainterShaderRegistrarGLS...">fastuidraw::glsl::PainterItemShaderGLSL</a>)</li>
<li><a class="el" href="d5/d60/classfastuidraw_1_1_painter_surface.html" title="PainterSurface represents an interface to specify a buffer to which a PainterBackend renders content...">fastuidraw::PainterSurface</a> (the GL backend class is given by <a class="el" href="d4/d73/classfastuidraw_1_1gl_1_1_painter_backend_g_l_1_1_surface_g_l.html">fastuidraw::gl::PainterBackendGL::SurfaceGL</a>)</li>
</ul>
<p>To create a GL backend, one does: </p><div class="fragment"><div class="line"><span class="comment">//create a fastuidraw::gl::PainterBackendGL::SurfaceGL; the argument</span></div><div class="line"><span class="comment">//to its ctor determines its properties. Of important note is that</span></div><div class="line"><span class="comment">//a SurfaceGL can use as its backing store a GL texture passed FROM</span></div><div class="line"><span class="comment">//the caller.</span></div><div class="line"><a class="code" href="de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::PainterSurfaceGL&gt;</a> surface;</div><div class="line"></div><div class="line">fastuidraw::gl::PainterBackendGL::SurfaceGL::Properties props;</div><div class="line">props.dimensions(<a class="code" href="da/d46/group___utility.html#ga59250d30200f2501e2bdc91a65b202c7">ivec2</a>(resolution_width, resolution_height));</div><div class="line">surface = <a class="code" href="da/d46/group___utility.html#ga524a8b6674554f360cf8b04a3a6a37b0">FASTUIDRAWnew</a> <a class="code" href="d4/d73/classfastuidraw_1_1gl_1_1_painter_backend_g_l_1_1_surface_g_l.html">fastuidraw::gl::PainterBackendGL::SurfaceGL</a>(props);</div><div class="line"></div><div class="line"><span class="comment">//Create a GL backend for Painter, see the methods of PainterBackendGL on</span></div><div class="line"><span class="comment">//how to control how the backend is configured.</span></div><div class="line"><a class="code" href="de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::PainterBackend&gt;</a> painterBackend;</div><div class="line">painterBackend = <a class="code" href="dc/da8/classfastuidraw_1_1gl_1_1_painter_backend_g_l.html#ad1c5f46526271c2f2a60f82d82a92421">fastuidraw::gl::PainterBackendGL::create</a>();</div><div class="line"></div><div class="line"><span class="comment">//NOTES:</span></div><div class="line"><span class="comment">// 1. atlases can be used by multiple PainterBackendGL simutaneously</span></div><div class="line"><span class="comment">// 2. the member class params of each of the atlas types and PainterBackendGL</span></div><div class="line"><span class="comment">//    have additional properties one can set.</span></div><div class="line"><span class="comment">// 3. A PainterBackendGL is a very -heavy- object. Hence, these objects</span></div><div class="line"><span class="comment">//    should reused during an applications lifetime.</span></div><div class="line"><span class="comment">// 4. If a program needs multiple PainterBackendGL objects, use the</span></div><div class="line"><span class="comment">//    method fastuidraw::gl::PainterBackendGL::create_shared()</span></div><div class="line"><span class="comment">//    to create a PainterBackendGL that shares the \ref fastuidraw::gl::Program</span></div><div class="line"><span class="comment">//    object with the creator but has its own private buffer pools and state.</span></div><div class="line"></div><div class="line"><a class="code" href="de/d73/classfastuidraw_1_1reference__counted__ptr.html">fastuidraw::reference_counted_ptr&lt;fastuidraw::Painter&gt;</a> painter;</div><div class="line">painter = <a class="code" href="da/d46/group___utility.html#ga524a8b6674554f360cf8b04a3a6a37b0">FASTUIDRAWnew</a> <a class="code" href="da/de0/classfastuidraw_1_1_painter.html">fastuidraw::Painter</a>(painterBackend)</div><div class="line"></div><div class="line"><span class="comment">//NOTES:</span></div><div class="line"><span class="comment">// 3. it is fine to reuse a fastuidraw::Painter object or to create new ones,</span></div><div class="line"><span class="comment">//    however, a single painter can not be used concurrently from multiple threads</span></div></div><!-- fragment --><p>Using the GL backend is just: </p><div class="fragment"><div class="line"><span class="comment">//have the painter render to the surface</span></div><div class="line">painter-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#a52aa170f6c6f07964f907d7afead7398">begin</a>(surface, myOrientation);</div><div class="line">  <span class="comment">//painter calls</span></div><div class="line">  <span class="comment">//.</span></div><div class="line">  <span class="comment">//.</span></div><div class="line">painter-&gt;<a class="code" href="da/de0/classfastuidraw_1_1_painter.html#a36fdc36656a738b260c48dd72b6e23c4">end</a>(); <span class="comment">//finish painting, contents of surface ready</span></div><div class="line"></div><div class="line"><span class="comment">//one /needs to get the contents of the SurfaceGL, there</span></div><div class="line"><span class="comment">//are two ways: via blit_surface() or by using the texture</span></div><div class="line"><span class="comment">//of the SurfaceGL</span></div><div class="line"><a class="code" href="d4/d73/classfastuidraw_1_1gl_1_1_painter_backend_g_l_1_1_surface_g_l.html">fastuidraw::gl::PainterBackendGL::SurfaceGL</a> *surface_gl;</div><div class="line">surface_gl = surface.<a class="code" href="de/d73/classfastuidraw_1_1reference__counted__ptr.html#a42563f20865e693424bcd151ad78a03e">get</a>(); <span class="comment">//Only using pointer instead of handle so that doxygen links to functions correctly.</span></div><div class="line"></div><div class="line"><span class="comment">//blitting is done by</span></div><div class="line">surface_gl-&gt;<a class="code" href="d4/d73/classfastuidraw_1_1gl_1_1_painter_backend_g_l_1_1_surface_g_l.html#a1d19131b325f00b71aaf2a91d39de21b">blit_surface</a>();</div><div class="line"></div><div class="line"><span class="comment">//or one can get the texture of the SurfaceGL</span></div><div class="line"><span class="comment">//directly and use that in one&#39;s own GL commands</span></div><div class="line">GLuint gl_texture;</div><div class="line">gl_texture = surface_gl-&gt;<a class="code" href="d4/d73/classfastuidraw_1_1gl_1_1_painter_backend_g_l_1_1_surface_g_l.html#ab1688defa5f8440dcb975bf9687133ac">texture</a>();</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
